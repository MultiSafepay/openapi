properties:
  type:
    description: |
      - `redirect` orders redirect the customer to a MultiSafepay payment page where the customer can select a payment method and/or complete the payment. 
      - `direct` orders redirect the customer to an authentication or success page, depending on the payment method.
      - `paymentlink` orders are accessible through a the [merchant dashboard](https://merchant.multisafepay.com/).
      - `checkout` for FastCheckout orders.
    example: redirect
    type: string
    enum: [direct, redirect, checkout, paymentlink]
  order_id:
    description: Your unique (client-defined) identifier for the order.
    example: test-order-0001
    maxLength: 50
    type: string
  gateway:
    description: |
      The unique gateway identifier for the payment method.

      If unset, and `type` is set to `redirect`, a MultiSafepay payment page with all available payment methods is returned.
    example: IDEAL
    type: string
    enum: [AFTERPAY, ALIPAY, APPLEPAY, MISTERCASH, BANKTRANS, BELFIUS, CBC, CREDITCARD, AMEX, MASTERCARD, VISA, DOTPAY, EDENCOM, EINVOICE, EPS, GIROPAY, GOOGLEPAY, IDEAL, IN3, KLARNA, MAESTRO, PAYAFTER, PAYPAL, DBRTP, SANTANDER, DIREB, DIRECTBANK, TRUSTLY, TRUSTPAY, WECHAT]
  currency:
    description: |
      The currency you want the customer to pay in.

      See also, Wikipedia – [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217).
    example: EUR
    type: string
    format: ISO-4217 currency code
  amount:
    description: |
      The amount the customer needs to pay in the currency’s smallest unit.

      **Example**: For a payment of €14,95 set amount to `1495` and currency to `EUR`.
    type: unsigned integer
    minimum: 0
    example: 100
  description:
    description: |
      The order description that appears:
      - In your merchant dashboard 
      - On the MultiSafepay payment page (set `type` to `redirect`)
      - On the customer’s bank statement (if supported by their bank)
    example: Test order description
    type: string
    maxLength: 200
  payment_options:
    description: contains URLs to the success page, cancel page and your webhook endpoint.
    type: object
    properties:
      notification_url: 
        description: Endpoint for MultiSafepay to send status updates and other notifications to you.
        type: string
        example: https://www.example.com/payment-updates/
      notification_method:
        description: |
          Sets the notification method.
          
          We advice setting the notification method to `POST`, to reduce network load and increase security.

          See also, [Notification URL](https://docs.multisafepay.com/developer/api/notification-url/).
        type: string
        enum: [POST, GET]
        default: GET
        example: POST
      redirect_url:
        description: Page that the customer is redirected to after **successful** payments.
        type: string
        example: https://www.example.com/test-order-0001/successful/
      cancel_url:
        description: Page that the customer is redirected to after **unsuccessful** payments.
        type: string
        example: https://www.example.com/test-order-0001/unsuccessful/
      close_window:
        description: To display the MultiSafepay payment page in a new window that automatically closes after the customer completes payment, set to `true`.
        type: boolean
        default: false
      settings:
        description: Contains gateway-specific settings
        type: object
        properties:
          coupons: 
            description: Contains settings for gift cards
            properties:
              allow:
                description: Specifies what gift cards the customer may pay with
                type: array
                example: EDENCO
                enum: [BABYCAD, BEAUTYWELL, BLOEMENCAD, BOEKENBON, DEGROTESPL, EDENCOM, EDENCO, EDENRES, EDENSPORTS, FASHIONCHQ, FASHIONGFT, FIETSENBON, GOOD4FUN, GEZONDHEID, NATNLBIOSC, NATNLETUIN, PARFUMCADE, SPORTENFIT, VRGIFTCARD, VVVGIFTCRD, WEBSHOPGFT, WIJNCADEAU, YOURGIFT]
      template_id: 
        description: |
          Apply a [payment page styling template](https://docs.multisafepay.com/payment-pages/styling/) through it's identifier.

          If `payment_options.template` is also set, `payment_options.template` is used.
        type: string
      template: 
        description: |
          A template object structure.
          
          The template structure overrides the `payment_options.template_id`.
        properties:
          version: 
            description:
  var1:
    description: Variable for storing additional data.
    type: string
    example: ""
  var2:
    description: Variable for storing additional data.
    type: string
    example: ""
  var3:
    description: |
      Variable for storing additional data.

      `var3` is also used to store Split Payment metadata.
    type: string
    example: ""
  custom_info:
    description: Used to store custom information about the order
    properties:
      custom_1:
        description: First string to store 
        type: string
      custom_2:
        description:
        type: string
      custom_3:
        description:
        type: string
  customer:
    description: The customer’s personal information.
    type: object
    properties: 
      locale:
        description: |
          Localizes the payment page with the customer’s language, region, and available payment methods.

          For more information, see [Locale parameter](https://docs.multisafepay.com/developer/api/locale-parameter/).
        format: ab_CD with ISO 639 language codes and ISO 3166 country codes.
        default: 'en_US (American English)'
      ip_address: 
        description: |
          The customer’s IP address.

          Required for pay later methods and credit cards as part of our fraud check, optional but recommended for other payment methods.
          If empty or incorrect (e.g. your IP address instead of the customer’s) when required, the transaction status may be Uncleared, or even Declined.
        type: string
        format: IP address
        example: "123.123.123.123"
      forwarded_ip:
        description:
          The [X-Forwarded-For](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For) header of the customer object when using a proxy.
        type: string
        format: IP address
      first_name:
        description: |
          The customer’s first name.

          We recommend always requiring the customer to provide their full name, instead of initials or abbreviations.
        type: string
        minLength: 2
        example: John
      last_name:
        description: |
          The customer’s last name.

          We recommend always requiring the customer to provide their full name, instead of initials or abbreviations.
        type: string
        minLength: 2
        example: Doe
      gender:
        description: The customer's title.
        type: string
        example: Mr.
      birthday:
        description: The customer's birthday.
        type: string
        format: yyyy-MM-dd
        example: "1980-12-31"
      address1:
        description: The first line of the customer’s address.
        type: string
        example: Kraanspoor
      address2:
        description: The second line of the customer’s address.
        type: string
        example: ""
      house_number:
        description: The customer’s house number.
        type: string
        example: 39C
      zip_code:
        description: The customer’s ZIP/postal code.
        type: string
        example: 1033SC
      city: 
        description: The customer’s city of residence.
        type: string
        example: Amsterdam
      country: 
        description: |
          The customer’s country of residence.
          
          See also, [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)
        type: string
        example: NL
        format: ISO 3166-1 alpha-2
      phone: 
        description: The customer’s phone number.
        type: string
        example: "0208500500"
      email:
        description: |
          The customer’s email address.

          Used to send [Second Chance](https://docs.multisafepay.com/features/second-chance/) emails and to conduct fraud checks.
        type: string
        example: customer@emailprovider.com
      user_agent:
        description: A characteristic string that identifies a browser.
        type: string
        example: Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36
      referrer: 
        description: The unique identifier of where the customer/browser originates from.
        type: string
      reference:
        description: |
          A unique client-defined identifier for your customer.

          See also, [Recurring payments orders](https://docs.multisafepay.com/api/#recurring-payments-orders).
        type: string
        example: customer-0001
  delivery:
    description: The delivery information for shipping the order.
    type: object
    properties:
      first_name:
        description: The customer’s first name.
        type: string
        minLength: 2
        example: "John"
      last_name:
        description: The customer's last name.
        type: string
        minLength: 2
        example: "Doe"
      address1:
        description: The first line of the customer’s address.
        type: string
        example: "Kraanspoor"
      house_number:
        description: The customer’s house number.
        type: string
        example: "39C"
      zip_code:
        description: The customer’s ZIP/postal code.
        type: string
        example: "1033 SC"
      city:
        description: The customer’s city of residence.
        type: string
        example: "Amsterdam"
      country:
        description: | 
          The customer’s country of residence.

          **Format**: [ISO 3166-1](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)
        type: string
        example: "NL"
  gateway_info:
    type: object
    description: Information specific to the payment method (`gateway`).
    properties:
      flexible_3d: 
        description: |
          Sets whether or not 3D Secure authentication is required

          **True**: enable the 3D Secure authentication  
          **False**: disable the 3D Secure authentication
        type: boolean
      card_number:
        description: The customer's credit card number
        type: string
        example: "4111111111111111"
      card_holder_name:
        description: The cardholder's name
        type: name
        example: John Doe
      card_expiry_date:
        description: The credit card's expiry date
        type: string
        format: yyMM
        example: "2412"
      card_cvc:
        description: |
          The card verification code (CVC) is a 3 or 4 digit number used as an additional security feature for card-not-present transactions.  
          
          `card_cvc` is not required for:
          - Debit cards, like `MAESTRO`
          - Recurring payments
        type: string
        example: "123"
      term_url: 
        description: URL that is used to instruct the card issuer where to redirect the authorisation query.
        type: string
        format: URL
        example: https://example.com/?type=term&api_key=<api_key>
      issuer_id:
        description: The unique identifier of the gateway issuer.
        type: string
        example: '0021'
  second_chance:
    description: |
      Sends a reminder email to the customer containing a payment link.

      See also, [Second Chance](https://docs.multisafepay.com/features/second-chance/).
    type: object
    properties:
      send_mail:
        description: |
          Sets whether reminder emails are sent if the customer doesn't complete the payment.

          - If `true`, sends reminder emails.
          - If `false` or unset, doesn't send reminder emails.
        type: boolean
  checkout_options:
    description: The settings for payment processing.
    type: object 
    properties:
      validate_cart:
        description: |
          If set to `true`, the value of `amount` is compared with the calculated total value of the shopping cart (returned as `order_total`).

          If the values:
          
          - Match: the request is successful.
          - Don’t match: the request is not successful and error_code 1027 is returned.
        type: boolean
        default: false
      tax_tables:
        description: Set default VAT settings and create VAT classes in the alternate array that you can apply to individual shopping cart items.
        type: object
        properties:
          default:
            description: The default VAT setting. Used when no value is set for `shopping_cart.items.tax_table_selector`.
            type: object
            properties: 
              shipping_taxed: 
                description: Whether or not the shipping costs are taxed.
                type: boolean
              rate:
                description: |
                  The tax rate percentage as a fraction e.g. 15% is expressed as `0.15`
                type: number
                format: float
                example: 0.15
                minimum: 0
          alternate: 
            description: An array of client-defined VAT classes that you can apply to items in the shopping cart.
            type: array
            items: 
              type: object
              properties:
                name:
                  description: The client-defined ID. Used to apply tax settings to items in the shopping cart through the `shopping_cart.items.tax_table_selector` attribute.
                  type: string
                standalone:
                  description: Whether or not the shipping costs are taxed.
                  type: boolean
                rules: 
                  type: array
                  items: 
                    type: object
                    properties:
                      rate:
                        description: The tax rate percentage expressed as a fraction.
                        type: number
                        format: float
                        example: 0.0825
                        minimum: 0
                      country:
                        description: |
                          The country where the tax rate applies.

                          See also, [ISO 3166-1 alpha-2]()
                        type: string
                        example: US
                        format: ISO 3166-1 alpha-2
  items:
    description: Lets you display the items in the customer’s order in a single line on your checkout page instead of including a `shopping_cart` object.
    type: string
    example: "<ol><li>Article 1: € 1,95</li><li>Article 2: € 2,95</li><li>Article 3: € 3,95</li></ol>"
  days_active:
    description: |
      Number of days the payment link is valid for.

      Applies only to `redirect`-type orders.

      If `seconds_active` is also set, `seconds_active` is used.
    type: integer
    minimum: 1
    default: 30
  seconds_active: 
    description: |
      Number of seconds the payment link is valid for.

      Applies only to `redirect`-type orders.

      If `days_active` is also set, `seconds_active` is used.
    type: integer
    minimum: 1
    default: 2592000
  plugin:
    description: Specifies information about your integration, useful for debugging.
    properties:
      shop:
        description: The ecommerce platform that you use.
        type: string
        example: "My custom-built ecommerce"
      plugin_version:
        description: The version of the plugin.
        type: string
        example: "1.0.0"
      shop_version: 
        description: The version of the ecommerce webshop you use.
        type: string
        example: ""
      partner: 
        description: The name of the third party that developed the ecommerce webshop.
        type: string
      shop_root_url:
        description: The root/base URL of the ecommerce webshop.
        type: string
        example: "https://www.my-ecommerce.com"
  affiliate:
    description: Settings related to affiliated MultiSafepay accounts
    type: object
    properties:
      split_payments:
        description: |
          Split the amount of a transaction between partner or affiliate accounts by a percentage, a fixed amount, or both.

          For every split payment rule, add an object to the array.
        type: array
        items:
          type: object
          properties:
            merchant: 
              description: The account ID of the MultiSafepay account
              type: string
              example: 1001001
            fixed: 
              description: Specify the amount to split in cents.
              type: integer
              minimum: 1
            percentage: 
              description: Specify a percentage of the amount to split.
              type: number
              format: float
              minimum: 1
            description: 
              description: The description of the split payment.
              type: string
  shopping_cart:
    description: |
      Array of items in the customer's shopping cart, including the tax class.

      If you have a custom integration, include the complete specification of the `shopping_cart`.
    type: object
    properties:
      items:
        description: |
          The items in the customer's shopping cart. 
        
          Specify the relevant tax ruling per item.
        array:
        items:
          type: object
          properties:
            name:
              description: Name of the product/service
              type: string
              example: Backpack
            description:
              description: Description of the product/service
              type: string
              example: Black cotton backpack with logo.
            unit_price:
              description: | 
                The unit price (in decimals) of the item, excluding VAT.

                The currency of the shopping cart is set at an order-level with `currency`. 

                **Example**: A €90 backpack has value `90`
              type: number
              format: float
              example: 90.00
            quantity:
              description: The number of sold units of the item.
              type: integer
              example: 1
            merchant_item_id:
              description: |
                Your unique (client-defined) identifier for the product/service.

                If this item specifies the shipping costs, set to `msp-shipping`.
              type: string
              example: "12345678"
              maxLength: 
            tax_table_selector:
              description: Your client-defined identifier for a tax table, specified as `checkout_options.tax_tables.alternate.name`.
              type: string
              example: "VAT-21"
            weight:
              description: The weight per product.
              type: object
              properties:
                unit: 
                  description: The unit of weight.
                  type: string
                  enum: [KG]
                  example: KG
                value: 
                  description: |
                    The weight of the item corresponding to the unit.

                    For a 2 kilogram product:
                    - Set `value` to `2`.
                    - Set `unit` to `KG`.
                  type: number
                  example: 2
type: object
required:
  - type
  - order_id
  - currency
  - amount
