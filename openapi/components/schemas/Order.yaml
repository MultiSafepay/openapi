properties:
  type:
    description: |
      - `redirect`: Redirects the customer to a [MultiSafepay payment page](https://docs.multisafepay.com/payment-pages/), where they can select a payment method and complete payment. 
      - `direct`: Redirects the customer to an authentication or success page, depending on the payment method.
      - `paymentlink`: Creates a [payment link](https://docs.multisafepay.com/payment-links/).
      - `checkout`: Creates a FastCheckout order.
      
      For more information, see [Direct vs redirect API requests](https://docs.multisafepay.com/developer/direct-vs-redirect).
    example: redirect
    type: string
    enum: [direct, redirect, checkout, paymentlink]
  order_id:
    $ref: 'OrderId.yaml'
  gateway:
    allOf:
      - description: "The unique gateway identifier for the payment method.<br><br>If unset, and `type` is set to `redirect`, a MultiSafepay payment page with all available payment methods is returned."
      - example: IDEAL
      - type: string
      - $ref: 'GatewayIdentifiers.yaml'
  currency:
    $ref: 'Currency.yaml'
  amount:
    $ref: 'Amount.yaml'
  description:
    $ref: 'Description.yaml'
  payment_options:
    description: | 
      Contains: 
      
      - URLs to your success page and cancel page
      - Your webhook endpoint
      - Templates for styling [MultiSafepay payment pages](https://docs.multisafepay.com/payment-pages/).
    type: object
    properties:
      notification_url: 
        description: The webhook endpoint for MultiSafepay to send you status updates and other notifications.
        type: string
        example: https://www.example.com/payment-updates/
      notification_method:
        description: |
          Sets the notification method.
          
          We recommend setting this to `POST` to reduce network load and increase security.

          See also [Notification URL](https://docs.multisafepay.com/developer/api/notification-url/).
        type: string
        enum: [POST, GET]
        default: GET
        example: POST
      redirect_url:
        description: The page customers are redirected to after **successful** payment.
        type: string
        example: https://www.example.com/test-order-0001/successful/
      cancel_url:
        description: The page that customers are redirected to after **unsuccessful** payments.
        type: string
        example: https://www.example.com/test-order-0001/unsuccessful/
      close_window:
        description: To display the MultiSafepay payment page in a new window that automatically closes after the customer completes payment, set to `true`.
        type: boolean
        default: false
      settings:
        description: Contains gateway-specific settings.
        type: object
        properties:
          coupons: 
            description: Contains settings for gift cards.
            properties:
              allow:
                description: Specifies what gift cards the customer can pay with.
                type: array
                example: EDENCO
                enum: [BABYCAD, BEAUTYWELL, BLOEMENCAD, BOEKENBON, DEGROTESPL, EDENCOM, EDENCO, EDENRES, EDENSPORTS, FASHIONCHQ, FASHIONGFT, FIETSENBON, GOOD4FUN, GEZONDHEID, NATNLBIOSC, NATNLETUIN, PARFUMCADE, SPORTENFIT, VRGIFTCARD, VVVGIFTCRD, WEBSHOPGFT, WIJNCADEAU, YOURGIFT]
      template_id: 
        description: |
          Applies a [payment page styling template](https://docs.multisafepay.com/payment-pages/styling/) using its identifier.

          If `payment_options.template` is also set, `payment_options.template` is used.
        type: string
      template: 
        description: |
          A template object structure.
          
          The template structure overrides the `payment_options.template_id`.
        properties:
          version: 
            description:
  var1:
    $ref: 'var12.yaml'
  var2:
    $ref: 'var12.yaml'
  var3:
    $ref: 'var3.yaml'
  custom_info:
    description: Stores custom information about the order.
    properties:
      custom_1:
        description: The first string to store. 
        type: string
      custom_2:
        description:
        type: string
      custom_3:
        description:
        type: string
  customer:
    $ref: 'CustomerObject.yaml'
  delivery:
    description: The customer's address details for shipping the order.
    type: object
    properties:
      first_name:
        description: The customer’s first name.
        type: string
        minLength: 2
        example: "John"
      last_name:
        description: The customer's last name.
        type: string
        minLength: 2
        example: "Doe"
      address1:
        description: The first line of the customer’s address.
        type: string
        example: "Kraanspoor"
      house_number:
        description: The customer’s house number.
        type: string
        example: "39C"
      zip_code:
        description: The customer’s ZIP/postal code.
        type: string
        example: "1033 SC"
      city:
        description: The customer’s city of residence.
        type: string
        example: "Amsterdam"
      country:
        description: | 
          The customer’s country of residence.

          **Format**: [ISO 3166-1](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)
        type: string
        example: "NL"
  gateway_info:
    type: object
    description: Information specific to the payment method (`gateway`).
    properties:
      flexible_3d: 
        description: |
          Sets whether or not 3D Secure authentication is required.

          **True**: Enables 3D Secure authentication  
          **False**: Disables 3D Secure authentication
        type: boolean
      card_number:
        description: "The customer's credit card number."
        type: string
        example: "4111111111111111"
      card_holder_name:
        description: "The cardholder's name."
        type: name
        example: John Doe
      card_expiry_date:
        description: "The credit card's expiry date."
        type: string
        format: yyMM
        example: "2412"
      card_cvc:
        description: |
          The card verification code (CVC) – a 3 or 4 digit number used as an additional security feature for card-not-present transactions.  
          
          `card_cvc` is not required for:
          - Debit cards, e.g. `MAESTRO`
          - Recurring payments
        type: string
        example: "123"
      term_url: 
        description: URL that tells the card issuer where to redirect the authorisation query.
        type: string
        format: URL
        example: https://example.com/?type=term&api_key=<api_key>
      issuer_id:
        description: The unique identifier of the gateway issuer.
        type: string
        example: '0021'
  second_chance:
    description: |
      Sends a reminder email to the customer containing a payment link to complete an abandoned payment.

      See also [Second Chance](https://docs.multisafepay.com/features/second-chance/).
    type: object
    properties:
      send_mail:
        description: |
          Sets whether to send reminder emails if the customer doesn't complete payment.

          - If `true`, sends reminder emails.
          - If `false` or unset, doesn't send reminder emails.
        type: boolean
  checkout_options:
    description: The settings for payment processing.
    type: object 
    properties:
      validate_cart:
        description: |
          If set to `true`, the value of `amount` is compared to the calculated total value of the shopping cart (returned as `order_total`).

          If the values:
          
          - Match, the request is successful.
          - Don’t match, the request is unsuccessful and error_code 1027 is returned.
        type: boolean
        default: false
      tax_tables:
        description: Sets default VAT settings and creates VAT classes in the alternate array, which you can apply to individual shopping cart items.
        type: object
        properties:
          default:
            description: The default VAT setting. Used when no value is set for `shopping_cart.items.tax_table_selector`.
            type: object
            properties: 
              shipping_taxed: 
                description: Whether or not the shipping costs are taxed.
                type: boolean
              rate:
                description: |
                  The tax rate percentage as a fraction, e.g. 15% is expressed as `0.15`.
                type: number
                format: float
                example: 0.15
                minimum: 0
          alternate: 
            description: An array of client-defined VAT classes that you can apply to items in the shopping cart.
            type: array
            items: 
              type: object
              properties:
                name:
                  description: The client-defined ID. Used to apply tax settings to items in the shopping cart through the `shopping_cart.items.tax_table_selector` attribute.
                  type: string
                standalone:
                  description: Whether or not the shipping costs are taxed.
                  type: boolean
                rules: 
                  type: array
                  items: 
                    type: object
                    properties:
                      rate:
                        description: The tax rate percentage expressed as a fraction.
                        type: number
                        format: float
                        example: 0.0825
                        minimum: 0
                      country:
                        description: |
                          The country where the tax rate applies.

                          See also [ISO 3166-1 alpha-2]()
                        type: string
                        example: US
                        format: ISO 3166-1 alpha-2
  items:
    description: Displays the items in the customer’s order in a single line on your checkout page, instead of including a `shopping_cart` object.
    type: string
    example: "<ol><li>Article 1: € 1,95</li><li>Article 2: € 2,95</li><li>Article 3: € 3,95</li></ol>"
  days_active:
    description: |
      For `redirect` and `paymentlink` orders, he number of days the payment link is valid for.

      If `seconds_active` is also set, `seconds_active` is used.
    type: integer
    minimum: 1
    default: 30
  seconds_active: 
    description: |
      For `redirect` and `paymentlink` orders, the number of seconds the payment link is valid for.

      If `days_active` is also set, `seconds_active` is used.
    type: integer
    minimum: 1
    default: 2592000
  plugin:
    description: Specifies information about your integration, which is useful for debugging.
    properties:
      shop:
        description: The ecommerce platform that you use.
        type: string
        example: "My custom-built ecommerce"
      plugin_version:
        description: The version of the plugin.
        type: string
        example: "1.0.0"
      shop_version: 
        description: The version of the ecommerce webshop you use.
        type: string
        example: ""
      partner: 
        description: The name of the third party that developed the ecommerce webshop.
        type: string
      shop_root_url:
        description: The root/base URL of the ecommerce webshop.
        type: string
        example: "https://www.my-ecommerce.com"
  affiliate:
    description: Settings for affiliated MultiSafepay accounts.
    type: object
    properties:
      split_payments:
        description: |
          Split the amount of a transaction between partner or affiliated accounts by a percentage, a fixed amount, or both.

          For every split payment rule, add an object to the array.
        type: array
        items:
          type: object
          properties:
            merchant: 
              description: The account ID of the affiliated account.
              type: string
              example: 1001001
            fixed: 
              description: Specify the amount to split in cents.
              type: integer
              minimum: 1
            percentage: 
              description: Specify a percentage of the amount to split.
              type: number
              format: float
              minimum: 1
            description: 
              description: A description of the split payment.
              type: string
  shopping_cart:
    description: |
      The array of items in the customer's shopping cart, including the tax class.

      If you have a self-made integration, include the complete specification of the `shopping_cart`.
    type: object
    properties:
      items:
        description: |
          The items in the customer's shopping cart. 
        
          Specify the relevant tax rule per item.
        array:
        items:
          type: object
          properties:
            name:
              description: The name of the product or service.
              type: string
              example: Backpack
            description:
              description: A description of the product or service.
              type: string
              example: Black cotton backpack with logo.
            unit_price:
              description: | 
                The unit price (in decimals) of the item, excluding VAT.

                The currency of the shopping cart is set at order level using `currency`. 

                **Example**: The value for a €90 backpack is `90`.
              type: number
              format: float
              example: 90.00
            quantity:
              description: The number of sold units of the item.
              type: integer
              example: 1
            merchant_item_id:
              description: |
                Your unique (client-defined) identifier for the product or service.

                If this item specifies the shipping costs, set to `msp-shipping`.
              type: string
              example: "12345678"
              maxLength: 
            tax_table_selector:
              description: Your client-defined identifier for a tax table, specified as `checkout_options.tax_tables.alternate.name`.
              type: string
              example: "VAT-21"
            weight:
              description: The weight per product.
              type: object
              properties:
                unit: 
                  description: The unit of weight.
                  type: string
                  enum: [KG]
                  example: KG
                value: 
                  description: |
                    The weight of the item corresponding to the unit.

                    For a 2 kilogram product:
                    - Set `value` to `2`.
                    - Set `unit` to `KG`.
                  type: number
                  example: 2
type: object
